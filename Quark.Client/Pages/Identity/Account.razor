@page "/account"
<PageTitle>Account Settings | @ApplicationConstants.LibraryName</PageTitle>

<MudText Typo="Typo.h5" Color="Color.Primary" Class="mb-2">Account</MudText>
<MudText Typo="Typo.body1" Color="Color.Surface" Class="mb-4">Manage your account here</MudText>

<MudDivider Class="mb-4" />

<MudTabs Elevation=0 Color=Color.Tertiary Outlined Rounded>
    <MudTabPanel Text="Profile">
        <Profile />
    </MudTabPanel>
    <MudTabPanel Text="Security">
        <EditForm Model="@passwordModel" OnValidSubmit="ChangePasswordAsync">
            <FluentValidationValidator @ref="fluentValidationValidator" />
            <MudCard Elevation=0 Outlined>
                <MudCardHeader>
                    <CardHeaderContent>
                        <MudText>Change Password</MudText>
                    </CardHeaderContent>
                </MudCardHeader>
                <MudCardContent>
                    <MudGrid>
                        <MudItem xs="12" sm="6" md="3">
                            <MudTextField T=string @bind-Value="passwordModel.Password" For="@(() => passwordModel.Password)" Label="Current Password" Variant=Variant.Outlined InputType="currentPasswordInput" Adornment="Adornment.End" AdornmentIcon="@currentPasswordInputIcon" OnAdornmentClick="@(() => TogglePasswordVisibility(false))" />
                        </MudItem>
                        <MudItem xs="12" sm="6" md="3">
                            <MudTextField T=string @bind-Value="passwordModel.NewPassword" For="@(() => passwordModel.NewPassword)" Label=Password Variant=Variant.Outlined InputType="newPasswordInput" Adornment="Adornment.End" AdornmentIcon="@newPasswordInputIcon" OnAdornmentClick="@(() => TogglePasswordVisibility(true))" />
                        </MudItem>
                        <MudItem xs="12" sm="6" md="3">
                            <MudTextField T=string @bind-Value="passwordModel.ConfirmNewPassword" For="@(() => passwordModel.ConfirmNewPassword)" Label="Password Confirmation" Variant="Variant.Outlined" InputType="newPasswordInput" Adornment="Adornment.End" AdornmentIcon="@newPasswordInputIcon" OnAdornmentClick="@(() => TogglePasswordVisibility(true))" />
                        </MudItem>
                    </MudGrid>
                </MudCardContent>
                <MudCardActions Class="pb-4 pl-4">
                    <MudButton Variant="Variant.Filled" DisableElevation Color="Color.Primary" ButtonType="ButtonType.Submit" Class="ml-auto">Change Password</MudButton>
                </MudCardActions>
            </MudCard>
        </EditForm>
    </MudTabPanel>
</MudTabs>