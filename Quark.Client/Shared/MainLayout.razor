@inherits LayoutComponentBase
@inject Navigation Navigation
<audio src="/media/notification.mp3" id="notification" />
<MudThemeProvider Theme=_currentTheme />
<MudDialogProvider />
<MudSnackbarProvider />
<AuthorizeView>
    <NotAuthorized>
        <MudContainer MaxWidth="MaxWidth.Small" Class="d-flex align-center" Style="height: 100vh;">
            <MudPaper Elevation="25" Class="pa-8" Style="width: 500px;">
                @Body
            </MudPaper>
        </MudContainer>
    </NotAuthorized>
    <Authorized>
        <MudSwipeArea OnSwipe=OnSwipe>
            <MudLayout>
                <MudAppBar>
                    @*<MudIcon Icon="@Icons.Custom.Brands.MicrosoftAzure" Color="Color.Inherit" Size="Size.Large" ViewBox="0 0 500 500" />*@
                    <MudIcon Icon="@Icons.Custom.Brands.MicrosoftAzure" Color="Color.Inherit" Size="Size.Large"  />
                    <MudText Typo="Typo.h5" Class="ml-4">@ApplicationConstants.LibraryName</MudText>
                    <MudToolBar DisableGutters="true">
                        <MudIconButton Icon="@Icons.Material.Outlined.Menu" Color="Color.Inherit" OnClick="(() => _drawerOpen =  !_drawerOpen)" Class="ml-3" />
                    </MudToolBar>
                    <MudSpacer />
                    <MudTooltip Text="Toggle light/dark theme">
                        <MudIconButton Icon="@Icons.Material.Filled.Brightness4" Color="Color.Inherit" OnClick="@((e) => DarkMode())" />
                    </MudTooltip>
                    <MudMenu Direction=Direction.Right OffsetY Dense Color=Color.Inherit Class="ms-2">
                        <ActivatorContent>
                            @if (string.IsNullOrEmpty(ImageDataUrl))
                            {
                                <MudAvatar Color="Color.Secondary">@FirstLetterOfName</MudAvatar>
                            }
                            else
                            {
                                <MudAvatar Image="@ImageDataUrl" Style="height:50px; width:50px;"> </MudAvatar>
                            }
                        </ActivatorContent>
                        <ChildContent>
                            <MudCard Elevation="0" Square="true" Style="background-color: var(--mud-palette-drawer-background); color: var(--mud-palette-drawer-text);">
                                <MudCardHeader>
                                    <CardHeaderAvatar>
                                        <MudAvatar Style="height:75px; width:75px;" Image="@ImageDataUrl" />
                                    </CardHeaderAvatar>
                                    <CardHeaderContent>
                                        <MudText Typo="Typo.h6">@FullName</MudText>
                                        <MudText Typo="Typo.body1">@Designation</MudText>
                                        <MudText Typo="Typo.body2">@Email</MudText>
                                    </CardHeaderContent>
                                </MudCardHeader>
                            </MudCard>
                            <MudDivider />
                            <MudListItem Text="Account" Href="/account" Icon="@Icons.Material.Outlined.Person" />
                            <MudListItem Text="Logout" Icon="@Icons.Material.Filled.Logout" OnClick="Logout" />
                        </ChildContent>
                    </MudMenu>
                </MudAppBar>
                <MudDrawer @bind-Open="_drawerOpen" Breakpoint="Breakpoint.Lg" Class="mudblazor-appbar-band">
                    <MudDrawerHeader Class="mudblazor-brand" LinkToIndex="true">
                        <svg viewBox="0 0 1653 1049" xmlns="http://www.w3.org/2000/svg" class="mudblazor-svg">
                            <path fill="#7467EF" d="M0.15,572.58V0.16L495.9,286.37v190.81L165.4,286.37v381.62L0.15,572.58z" />
                            <path fill="#594AE2" d="M495.9,286.37L991.65,0.16v572.43l-330.5,190.81l-165.25-95.4l330.5-190.81V286.37L495.9,477.18V286.37z" />
                            <path fill="#7467EF" d="M495.9,667.99V858.8l330.5,190.81V858.8L495.9,667.99z" />
                            <path fill="#594AE2" d="M826.4,1049.6l495.75-286.21V0.37l-165.25,95.4v572.21L826.4,858.8V1049.6z" />
                            <path fill="#7467ef" d="M1495,467.85l-165.25,95.41,157.47,91.52,165.25-95.38Z" />
                            <path fill="#7467EF" d="M1322.15,763.39l-165.25,95.4l330.5,190.81V858.8L1322.15,763.39z" />
                            <path fill="#7467EF" d="M1322.13,0.38l-165.25,95.4l330.29,190.83l165.25-95.38L1322.13,0.38z" />
                            <path fill="#594AE2" d="M1652.43,191.21l-165.25,95.41v762.99l165.25-95.4L1652.43,191.21z" />
                        </svg>
                    </MudDrawerHeader>
                    <NavMenu />
                </MudDrawer>
                <MudMainContent>
                    <MudToolBar>
                        <MudIconButton Disabled=@(!Navigation.CanNavigateBack) Icon="@Icons.Material.Filled.ArrowBack" OnClick="Navigation.NavigateBack" Color="Color.Inherit" />
                    </MudToolBar>
                    <MudContainer MaxWidth="MaxWidth.False" Class="mt-4">
                        @Body
                    </MudContainer>
                </MudMainContent>
                <MudScrollToTop TopOffset="400" Style="z-index:2000;">
                    <MudFab Color="Color.Primary" Icon="@Icons.Filled.KeyboardArrowUp" />
                </MudScrollToTop>
            </MudLayout>
        </MudSwipeArea>
    </Authorized>
</AuthorizeView>